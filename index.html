<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>나나 연구실 V6.0 - OROW</title>
    <style>
        :root { --neon: #00ffcc; --bg: #0a0a0b; }
        body { margin: 0; padding: 0; background: var(--bg); color: #fff; font-family: 'Apple SD Gothic Neo', sans-serif; }
        .screen { width: 100vw; height: 100vh; display: flex; align-items: center; justify-content: center; background: radial-gradient(circle at center, #1a1a1f 0%, #000 100%); }
        .glass-panel { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(25px); border-radius: 40px; padding: 35px; border: 1px solid rgba(0, 255, 204, 0.2); width: 88%; max-width: 400px; text-align: center; box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
        h1 { font-size: 24px; margin-bottom: 20px; letter-spacing: -1px; }
        textarea { width: 100%; height: 160px; background: rgba(0,0,0,0.4); border: 1px solid #333; border-radius: 18px; color: #fff; padding: 18px; box-sizing: border-box; font-size: 15px; outline: none; transition: 0.3s; line-height: 1.6; }
        textarea:focus { border-color: var(--neon); box-shadow: 0 0 15px rgba(0, 255, 204, 0.2); }
        #result-area { display: none; background: rgba(0, 255, 204, 0.05); border-radius: 18px; padding: 20px; border: 1px solid rgba(0, 255, 204, 0.3); margin-top: 20px; text-align: left; font-size: 16px; line-height: 1.9; max-height: 250px; overflow-y: auto; white-space: pre-wrap; color: #f0f0f0; }
        .btn-run { background: var(--neon); color: #000; border: none; border-radius: 18px; padding: 20px; font-weight: bold; cursor: pointer; font-size: 17px; width: 100%; margin-top: 20px; box-shadow: 0 10px 20px rgba(0,0,0,0.3); }
        .status-msg { font-size: 11px; color: var(--neon); margin-top: 12px; opacity: 0.7; }
    </style>
</head>
<body>

<div class="screen">
    <div class="glass-panel">
        <h1>나나 연구실 <span style="color:var(--neon)">V6.0</span></h1>
        
        <textarea id="text-input" placeholder="번역할 중국어 소설 본문을 입력하세요..."></textarea>
        
        <div id="result-area"></div>
        
        <button class="btn-run" id="main-btn" onclick="runTranslator()">엔진 가동 (1.5 Flash)</button>
        <div class="status-msg" id="status-log">시스템 준비 완료</div>
    </div>
</div>

<script>
    // 포비의 신규 API 키
    const API_KEY = "AIzaSyDFlvK6qzBAxM9D35-ehMu_duAYWjBXSVY";

    async function runTranslator() {
        const input = document.getElementById('text-input').value;
        const btn = document.getElementById('main-btn');
        const log = document.getElementById('status-log');
        const resArea = document.getElementById('result-area');

        if (!input) return alert("본문을 입력해주세요!");

        btn.disabled = true;
        log.innerText = "제미나이 1.5-Flash 연결 시도 중...";
        resArea.style.display = "block";
        resArea.innerText = "분석 중...";

        // [포비의 리스트 적용] v1beta와 models/ 명칭 조합
        const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`;

        try {
            const response = await fetch(url, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    contents: [{
                        parts: [{
                            text: `당신은 무협 소설 전문 번역가입니다. 아래 지침을 반드시 지키세요.
                            1. No Omission: 문장을 하나도 빠짐없이 번역하라.
                            2. 대한민국 한자음: 인명, 지명은 한국식 한자음으로만 표기하라. (중국 발음 절대 금지)
                            3. 구어체: 소설의 흐름에 맞는 자연스러운 한국어 문체를 사용하라.
                            
                            본문:
                            ${input}`
                        }]
                    }]
                })
            });

            const data = await response.json();

            if (data.error) {
                throw new Error(data.error.message);
            }

            if (data.candidates && data.candidates[0].content) {
                resArea.innerText = data.candidates[0].content.parts[0].text;
                log.innerText = "✅ 번역 완료 (Gemini 1.5 Flash)";
            } else {
                throw new Error("응답이 비어있습니다.");
            }
        } catch (e) {
            console.error(e);
            resArea.innerText = "오류 보고: " + e.message;
            log.innerText = "❌ 엔진 가동 실패";
        } finally {
            btn.disabled = false;
        }
    }
</script>
</body>
</html>
